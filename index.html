<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fitness Hub ‚Äì All in One</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  transition: background 0.6s ease, color 0.4s ease;
}
.dark-bg {
  background-image: url("https://images.unsplash.com/photo-1554284126-aa88f22d8b74");
}
.light-bg {
  background-image: url("https://images.unsplash.com/photo-1558611848-73f7eb4001a1");
}
.bg-cover-fixed {
  background-size: cover;
  background-attachment: fixed;
}
</style>
</head>

<body class="min-h-screen dark-bg bg-cover-fixed text-white">

<!-- NAVBAR -->
<nav class="flex justify-between items-center p-4 bg-black/70">
  <h1 class="text-xl font-bold">Fitness Hub</h1>
  <div class="flex items-center gap-4">
    <span id="userLabel"></span>
    <button id="themeBtn" class="text-2xl">üåô</button>
    <button onclick="logout()" class="bg-red-500 px-3 py-1 rounded hidden" id="logoutBtn">Logout</button>
  </div>
</nav>

<!-- LOGIN -->
<section id="loginSection" class="flex justify-center mt-12">
  <div class="bg-black/70 p-6 rounded w-80">
    <h2 class="text-center text-lg mb-4">Login</h2>
    <input id="email" class="w-full p-2 mb-3 text-black rounded" placeholder="Email">
    <input id="password" type="password" class="w-full p-2 mb-3 text-black rounded" placeholder="Password">
    <select id="role" class="w-full p-2 mb-3 text-black rounded">
      <option value="user">User</option>
      <option value="admin">Admin</option>
    </select>
    <button onclick="login()" class="bg-blue-500 w-full p-2 rounded">Login</button>
  </div>
</section>

<!-- USER DASHBOARD -->
<section id="userDashboard" class="hidden p-6">
  <h2 class="text-2xl text-center mb-6">Diet Plan Calculator</h2>

  <div class="max-w-md mx-auto bg-black/70 p-6 rounded">
    <input id="weight" type="number" placeholder="Weight (kg)" class="w-full p-2 mb-3 text-black rounded">
    <input id="height" type="number" placeholder="Height (cm)" class="w-full p-2 mb-3 text-black rounded">
    <select id="goal" class="w-full p-2 mb-3 text-black rounded">
      <option value="loss">Weight Loss</option>
      <option value="maintain">Maintain</option>
      <option value="gain">Muscle Gain</option>
    </select>
    <button onclick="calculateDiet()" class="bg-green-500 w-full p-2 rounded">Calculate</button>
    <p id="dietResult" class="mt-4 text-center font-semibold"></p>
  </div>
</section>

<!-- ADMIN DASHBOARD -->
<section id="adminDashboard" class="hidden p-6">
  <h2 class="text-3xl mb-6 text-center">Admin Dashboard</h2>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="bg-black/70 p-4 rounded">
      <h3>Total Users</h3>
      <p class="text-2xl">120</p>
    </div>
    <div class="bg-black/70 p-4 rounded">
      <h3>Active Diet Plans</h3>
      <p class="text-2xl">45</p>
    </div>
    <div class="bg-black/70 p-4 rounded">
      <h3>Calculations Done</h3>
      <p class="text-2xl">300+</p>
    </div>
  </div>
</section>

<!-- FIREBASE + LOGIC -->
<script type="module">
/* ---------- FIREBASE SETUP (PLACEHOLDER) ---------- */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* ---------- LOGIN ---------- */
window.login = function () {
  const emailVal = email.value;
  const passVal = password.value;
  const roleVal = role.value;

  signInWithEmailAndPassword(auth, emailVal, passVal)
    .then(() => {
      localStorage.setItem("user", emailVal);
      localStorage.setItem("role", roleVal);
      showDashboard(roleVal);
    })
    .catch(err => alert(err.message));
};

/* ---------- DASHBOARD SWITCH ---------- */
function showDashboard(role) {
  loginSection.classList.add("hidden");
  logoutBtn.classList.remove("hidden");
  userLabel.textContent = "Logged in";

  if (role === "admin") {
    adminDashboard.classList.remove("hidden");
  } else {
    userDashboard.classList.remove("hidden");
  }
}

/* ---------- LOGOUT ---------- */
window.logout = function () {
  signOut(auth).then(() => {
    localStorage.clear();
    location.reload();
  });
};

/* ---------- DIET CALCULATOR ---------- */
window.calculateDiet = function () {
  const w = Number(weight.value);
  const goalVal = goal.value;

  let calories = 24 * w;
  if (goalVal === "loss") calories -= 500;
  if (goalVal === "gain") calories += 500;

  dietResult.textContent = `Recommended Intake: ${calories} kcal/day`;
};

/* ---------- THEME TOGGLE ---------- */
const themeBtn = document.getElementById("themeBtn");
themeBtn.onclick = () => {
  document.body.classList.toggle("light-bg");
  document.body.classList.toggle("dark-bg");
  document.body.classList.toggle("text-black");
  document.body.classList.toggle("text-white");
  themeBtn.textContent =
    themeBtn.textContent === "üåô" ? "‚òÄÔ∏è" : "üåô";
};

/* ---------- AUTO LOGIN ---------- */
const savedUser = localStorage.getItem("user");
const savedRole = localStorage.getItem("role");
if (savedUser && savedRole) {
  showDashboard(savedRole);
}
</script>

</body>
</html>
