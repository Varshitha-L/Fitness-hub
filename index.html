<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fitness Hub – Advanced</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body { transition: 0.4s; }
.dark { background:#0f172a; color:#fff }
.light { background:#f8fafc; color:#000 }
.card { background:rgba(0,0,0,.6); border-radius:12px }
</style>
</head>
<body class="dark">
<nav class="flex justify-between p-4 bg-black/70">
<h1 class="text-xl font-bold">Fitness Hub</h1>
<div>
<button onclick="toggleTheme()" class="border px-3 py-1 mr-3">Theme</button>
<button id="logoutBtn" onclick="logout()" class="hidden bg-red-500 px-3 py-1 rounded">Logout</button>
</div>
</nav>
<section id="loginSection" class="flex justify-center mt-12">
<div class="card p-6 w-80">
<h2 class="text-center mb-4 text-lg">Login</h2>
<input id="email" class="w-full p-2 mb-3 text-black rounded" placeholder="Email">
<input id="password" type="password" class="w-full p-2 mb-3 text-black rounded" placeholder="Password">
<button onclick="login()" class="bg-blue-500 w-full p-2 rounded">Login</button>
</div>
</section>
<section id="userDashboard" class="hidden p-6 max-w-lg mx-auto">
<h2 class="text-2xl text-center mb-4">Health Dashboard</h2>
<div id="healthSummary" class="bg-black/60 p-4 rounded mb-4 text-center"></div>
<input id="weight" type="number" placeholder="Weight (kg)" class="w-full p-2 mb-2 text-black rounded">
<input id="height" type="number" placeholder="Height (cm)" class="w-full p-2 mb-2 text-black rounded">
<select id="goal" class="w-full p-2 mb-2 text-black rounded">
<option value="loss">Weight Loss</option>
<option value="maintain">Maintain</option>
<option value="gain">Muscle Gain</option>
</select>
<button onclick="calculateDiet()" class="bg-green-500 w-full p-2 rounded">Analyze Health</button>
<p id="bmiResult" class="text-center mt-2"></p>
<p id="dietResult" class="text-center font-semibold"></p>
<button onclick="downloadPDF()" class="bg-yellow-500 w-full p-2 mt-3 rounded">
Download Health Report (PDF)
</button>
<hr class="my-6">
<h3 class="text-lg text-center mb-2">Water Intake</h3>
<div class="bg-black/60 p-4 rounded text-center">
<button onclick="addWater(250)" class="bg-blue-500 px-4 py-2 rounded">+250ml</button>
<button onclick="addWater(500)" class="bg-blue-600 px-4 py-2 rounded ml-2">+500ml</button>
<p id="waterStatus" class="mt-2"></p>
<div class="bg-gray-700 h-3 rounded mt-2">
<div id="waterBar" class="bg-blue-400 h-3 rounded"></div>
</div>
</div>
<hr class="my-6">
<h3 class="text-lg text-center mb-2">Weekly Workout Plan</h3>
<button onclick="generateWeeklyWorkout()" class="bg-purple-500 w-full p-2 rounded">
Generate Weekly Plan
</button>
<ul id="workoutList" class="mt-3 space-y-2"></ul>
</section>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig={
 apiKey:"YOUR_API_KEY",
 authDomain:"YOUR_PROJECT.firebaseapp.com",
 projectId:"YOUR_PROJECT_ID"
};
const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
window.login=async()=>{
 await signInWithEmailAndPassword(auth,email.value,password.value);
 showDashboard();
}
window.logout=async()=>{await signOut(auth);location.reload();}
onAuthStateChanged(auth,u=>{if(u)showDashboard()});
function showDashboard(){
 loginSection.classList.add("hidden");
 userDashboard.classList.remove("hidden");
 logoutBtn.classList.remove("hidden");
}
window.calculateDiet=()=>{
 const w=+weight.value,h=+height.value/100;
 if(w<=0||h<=0) return alert("Invalid input");
 const bmi=(w/(h*h)).toFixed(1);
 let category=bmi<18.5?"Underweight":bmi<25?"Normal":bmi<30?"Overweight":"Obese";

 let calories=w*24;
 if(goal.value==="loss") calories-=400;
 if(goal.value==="gain") calories+=400;
 calories=Math.max(calories,1200);

 bmiResult.textContent=`BMI: ${bmi} (${category})`;
 dietResult.textContent=`Recommended Calories: ${Math.round(calories)} kcal/day`;
 healthSummary.innerHTML=
 `<b>Status:</b> ${category}<br>
  Goal: ${goal.value.toUpperCase()}<br>
  Maintain hydration and follow workouts.`;
 localStorage.setItem("healthData",JSON.stringify({bmi,category,calories}));
}
const today=new Date().toDateString();
let water=JSON.parse(localStorage.getItem("water")||"{}");
water[today]=water[today]||0;
const GOAL=3000;

window.addWater=a=>{
 water[today]+=a;
 localStorage.setItem("water",JSON.stringify(water));
 updateWater();
}
function updateWater(){
 const p=Math.min(water[today]/GOAL*100,100);
 waterBar.style.width=p+"%";
 waterStatus.textContent=`${water[today]} / 3000 ml`;
}
updateWater(); 
window.generateWeeklyWorkout=()=>{
 const base=[
 "Monday – Cardio",
 "Tuesday – Upper Body",
 "Wednesday – Lower Body",
 "Thursday – Core",
 "Friday – Full Body",
 "Saturday – Yoga",
 "Sunday – Rest"
 ];
 workoutList.innerHTML="";
 base.forEach(d=>{
  workoutList.innerHTML+=`
  <li class="bg-black/60 p-3 rounded">
   <input type="checkbox"> ${d}
  </li>`;
 });
}
window.downloadPDF=()=>{
 const { jsPDF }=window.jspdf;
 const pdf=new jsPDF();
 const d=JSON.parse(localStorage.getItem("healthData"));
 if(!d) return alert("Analyze health first");
 pdf.text("Fitness Hub Health Report",20,20);
 pdf.text(`BMI: ${d.bmi} (${d.category})`,20,35);
 pdf.text(`Calories: ${d.calories} kcal/day`,20,45);
 pdf.text("Stay consistent and hydrated.",20,60);
 pdf.save("health-report.pdf");
}
function applyTheme(t){
 document.body.className=t;
 localStorage.setItem("theme",t);
}
window.toggleTheme=()=>applyTheme(
 document.body.classList.contains("dark")?"light":"dark"
);
applyTheme(localStorage.getItem("theme")||"dark");
</script>
</body>
</html>
